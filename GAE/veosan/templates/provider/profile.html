{% extends "/layout/provider_nav.html" %}

{% set active_page = "profile" %}

{% block subhead %}{{ _('Profile') }}{% endblock %}
{% block lead %}{{ _('Fill out your profile for better patient matches.') }}{% endblock %}

{% block content %}
<!-- Form -->
<form method="post" action="/provider/profile/{{ provider.vanity_url }}" class="form-horizontal" id="profile_form">
	<div class="row">
		<div class="span6">
			<fieldset>
				{{ macro.make_standard_form(profile_form) }}
			</fieldset>
		</div>
		<div class="span6">
			<div class="well" style="width: 60%; margin: 0px auto;">
				<h2>{{ _("What's Next?") }}</h2>
				<p>{{ _('Here are some things you can do to improve your profile and make it easier for patients to find you.') }}</p>
				<ol style="font-size:large">
					<li><del>{{ _('Account setup') }}</del> <i class="bs-icon icon-ok"> </i></li>

					{% if not provider.profile_photo_blob_key %}
					<li>{{ _('Upload your photo') }}</li>
					{% else %}
					<li><del>{{ _('Upload your photo') }}</del> <i class="bs-icon icon-ok"> </i></li>
					{% endif %}

					{% if (not provider.bio or (provider.bio and provider.bio|length < 10))
								 or (not provider.quote or (provider.quote and provider.quote|length < 10)) %}
					<li>{{ _('Write your bio and quote') }}</li>
					{% else %}
					<li><del>{{ _('Write your bio and quote') }}</del> <i class="bs-icon icon-ok"> </i></li>
					{% endif %}
					
					{% if provider.get_cv_items_count() <= 3 %}
					<li>{{ _('Fill in your CV') }}</li>
					{% else %}
					<li><del>{{ _('Fill in your CV') }}</del> <i class="bs-icon icon-ok"> </i></li>
					{% endif %}
					
					{% if not provider.is_address_complete() %}
					<li>{{ _('Complete your address') }}</li>
					{% else %}
					<li><del>{{ _('Complete your address') }}</del> <i class="bs-icon icon-ok"> </i></li>
					{% endif %}

				</ol>
			</div>
			<br>
			<br>
			<br>
			
			<div align="center">
				<a data-toggle="modal" href="#upload_photo_modal">
				{% if not provider.profile_photo_blob_key %}
				<img src="/assets/img/default-profile.png" width="100" height="100"></a>
				{% else %}
				<img src="{{ provider.get_profile_photo_image_url(200) }}" width="200"></a>
				{% endif %}


				<br>
				<br>
				<a class="btn btn-primary" data-toggle="modal" href="#upload_photo_modal">{{ _('Upload Your Profile Photo') }}</a>
			</div>
			
			{#
			<br>
			<br>
			<br>
			<div class="well" style="width: 50%; margin: 0px auto;">
				<h4> {{ _('Pssst. Hey...we want to know what you think about this page!') }} </h4>
				<br>
				<p>
					{{ _("Let us know if you think something is missing or can be improved. Or if you're feeling nice, tell us you think it looks good! We love to hear feedback from our users.") }}
				</p>
				<p>
					<i class="bs-icon icon-bullhorn"> </i>

					{{ _("You can <a href='/contact'> get in touch with us here</a>.") }}
				</p>
			</div>
			#}
		</div>
	</div>
	<div class="row">
		<div class="span12 form-actions">
			<button type="submit" class="btn btn-primary">
				{% if (not provider.bio or (provider.bio and provider.bio|length < 10))
						 or (not provider.quote or (provider.quote and provider.quote|length < 10)) %}
					{{ _('Next Step: Fill in Your Biography and Quote') }}
				{% elif provider.get_cv_items_count() <= 3 %}
					{{ _('Next Step: Add Something to Your CV') }}
				{% elif not provider.is_address_complete() %}
					{{ _('Next Step: Complete Your Address') }}
				{% else %}
					{{ _('Save') }}
				{% endif %}
			</button>
		</div>
	</div>
</form>

<form action="{{ upload_url }}" method="post" enctype="multipart/form-data">
	<div class="modal hide" id="upload_photo_modal" style="display: none;">
		<div class="modal-header">
			<a class="close" data-dismiss="modal">Ã—</a>
			<h3>{{ _('Upload Your Profile Photo') }}</h3>
		</div>
		<div class="modal-body">
			{{ upload_form.profile_photo }}
		</div>
		<div class="modal-footer">
			<button type="submit" class="btn btn-primary">
				{{ _('Save') }}
			</button>
			<a class="btn" data-dismiss="modal">{{ _('Cancel') }}</a>
		</div>
	</div>
</form>
{% endblock %}
