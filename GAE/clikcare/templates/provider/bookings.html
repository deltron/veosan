{% extends "/layout/provider_nav.html" %}

{% set active_page = "bookings" %}

{% block subhead %}{{ _('Bookings') }}{% endblock %}
{% block lead %}{{ _('Your upcoming bookings.') }}{% endblock %}

{% block content %}
<div class="row">
		{% if bookings|length > 0 %}
		<div class="span6">

			<table class="table">
			<thead>
				<tr>
					<!-- <th>Key</th> -->
					<th>{{ _('Date and Time') }}</th>
					<th>{{ _('Patient') }}</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{% for b in bookings %}
					{% if b.patient %}
					<tr>
						<!-- Date (Booking) -->
						<td><a href="/booking/detail"> {{b.dateTime|format_datetime_full}} </a></td>
						<!-- Patient -->
						<td><a href="#" class="" rel="popover" title="{{b.patient.first_name}} {{b.patient.last_name}}" data-content="{{b.patient.phone}} <br> {{b.patient.email}} <br>">{{b.patient.first_name}} {{b.patient.last_name}}</a></td>
					</tr>
					{% else %}
						<!-- booking with a linked patient -->
					{% endif%}
				{% endfor %}
			</tbody>
			</table>
		</div>	

			
		{% else %}
		<div class="span12">
			<div class="alert alert-error">
  				{{ _('No upcoming bookings. Is there any time marked as available in your schedule?') }}
			</div>
		</div>
		{% endif %}
</div>
{% endblock content %} 

{% block extra_javascript %}
		<script src="/assets/js/bootstrap-tooltip.js"></script>
		<script src="/assets/js/bootstrap-popover.js"></script>
		<script>
			$(function() {
				$('a[rel=tooltip]').tooltip();
				$('a[rel=popover]').popover();
			});
		</script>
{% endblock extra_javascript %}
